FROM amazoncorretto:17

WORKDIR /app

COPY gradlew* ./
COPY gradle/ gradle/

COPY build.gradle settings.gradle ./

RUN chmod +x ./gradlew

COPY src/ src/

RUN ./gradlew build --no-daemon -x test

CMD ["java", "-jar", "build/libs/here-law.jar"]

EXPOSE 8080